<!doctype html>
<html lang="it">
<head>
<link rel="apple-touch-icon" sizes="180x180" href="./icons/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="167x167" href="./icons/apple-icon-167.png">
<link rel="apple-touch-icon" sizes="152x152" href="./icons/apple-icon-152.png">
<link rel="apple-touch-icon-precomposed" href="./icons/apple-touch-icon.png">
<meta name="apple-mobile-web-app-title" content="SerCucTech Mini-PC">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title><span id="tapSER">SerCucTech</span> <span id="tapMINI">Mini</span>-<span id="tapPC">PC</span></title>

  <link rel="manifest" href="./manifest.webmanifest">
  <meta name="theme-color" content="#d4af37">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <style>
    :root{
      --bg:#050505;
      --panel:#0b0b0b;
      --line: rgba(212,175,55,.28);
      --gold:#d4af37;
      --gold2:#ffde7a;
      --txt:#f3f0e6;
      --mut:#b8ad8c;
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --r:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      color:var(--txt);
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(212,175,55,.12), transparent 55%),
        radial-gradient(900px 600px at 120% 10%, rgba(255,222,122,.10), transparent 60%),
        linear-gradient(180deg, #020202, #070707 40%, #030303);
    }

    /* Layout: header fisso + contenuto scroll + footer fisso */
    .app{
      height:100%;
      display:grid;
      grid-template-rows:auto 1fr auto;
      padding: env(safe-area-inset-top) 14px env(safe-area-inset-bottom) 14px;
      gap:12px;
      max-width:980px;
      margin:0 auto;
    }

    header{
      position:relative;
#tapSER,#tapMINI,#tapPC{cursor:pointer;font-weight:900}
#tapSER:active,#tapMINI:active,#tapPC:active{text-decoration:underline}
#pwa{position:absolute;left:68px;top:4px;font-size:11px;pointer-events:none}

      display:flex; align-items:center; justify-content:space-between; gap:12px;
      background: rgba(0,0,0,.35);
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:10px 12px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }
    .brand{display:flex; align-items:center; gap:12px; min-width:0}
    .logo{
      width:44px; height:44px;
      border-radius:14px;
      border:1px solid rgba(212,175,55,.35);
      background: linear-gradient(180deg, rgba(212,175,55,.20), rgba(0,0,0,.25));
      display:grid; place-items:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .logo img{width:100%; height:100%; object-fit:cover}
    .title{min-width:0}
    .title h1{
      margin:0;
      font-size:18px;
      letter-spacing:.2px;
      color:#000; /* come hai chiesto: titolo nero */
      background: linear-gradient(180deg, rgba(255,222,122,.95), rgba(212,175,55,.85));
      display:inline-block;
      padding:2px 10px;
      border-radius:999px;
      border:1px solid rgba(0,0,0,.25);
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:72vw;
    }
    .title .sub{margin-top:6px; color:var(--mut); font-size:12px}

    .right{display:flex; gap:10px; align-items:center; flex-wrap:wrap; justify-content:flex-end}
    .pill{
      font-size:12px; color:var(--mut);
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.28);
      white-space:nowrap;
    }
    .btn{
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.30);
      color:var(--txt);
      font-weight:800;
      cursor:pointer;
    }
    .btn:hover{border-color:rgba(212,175,55,.55)}
    .btn.gold{
      background: linear-gradient(180deg, rgba(212,175,55,.22), rgba(0,0,0,.30));
      color: var(--gold2);
    }

    main{
      overflow:auto;
      padding:2px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:12px;
    }
    @media (min-width:820px){
      .grid{grid-template-columns: repeat(3, minmax(0, 1fr));}
    }

    .card{
      background: rgba(0,0,0,.36);
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:14px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      display:flex;
      flex-direction:column;
      gap:10px;
      min-height:140px;
    }
    .cardTop{display:flex; align-items:center; gap:10px}
    .ico{
      width:54px; height:54px;
      border-radius:16px;
      border:1px solid rgba(212,175,55,.35);
      background: rgba(0,0,0,.25);
      display:grid; place-items:center;
      overflow:hidden; /* evita icone tagliate male */
      flex:0 0 auto;
    }
    .ico img{width:78%; height:78%; object-fit:contain; filter: drop-shadow(0 10px 18px rgba(0,0,0,.6));}
    .card h2{margin:0; font-size:16px; color:var(--gold2)}
    .card p{margin:0; color:var(--mut); font-size:12px; line-height:1.35}
    .go{
      margin-top:auto;
      display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    a.link{
      text-decoration:none;
      color:var(--txt);
      font-weight:900;
      border:1px solid var(--line);
      border-radius:14px;
      padding:10px 12px;
      background: rgba(0,0,0,.26);
      display:inline-flex; align-items:center; gap:10px;
    }
    a.link:hover{border-color:rgba(212,175,55,.55)}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace; font-size:11px; color:var(--mut)}
    footer{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      background: rgba(0,0,0,.35);
      border:1px solid var(--line);
      border-radius: var(--r);
      padding:10px 12px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
      font-size:12px;
      color: var(--mut);
    }
    .smallLink{color:var(--gold2); text-decoration:none; font-weight:800}
  </style>
</head>
<body>
  <div class="app">

    <header>
      <div class="brand">
        <div class="logo" title="SerCucTech">
          <img src="./icons/logo.png" alt="SerCucTech Logo">
        </div>
        <div class="title">
          <h1>SERCUCTECH MINI-PC</h1>
          <div class="sub">Hub • Vetrine • File • Control • Sicurezza</div>
        </div>
      </div>

      <div class="right">
        <span class="pill" id="pwa">PWA: …</span>
        <button class="btn gold" id="btnInstall" style="display:none">Installa</button>
        <button class="btn" id="btnRefresh">Aggiorna</button>
<button id="btnResetCache" class="btn" style="margin-left:8px">Reset cache</button>
<script>
(async function(){
  const b=document.getElementById("btnResetCache");
  if(!b) return;
  b.addEventListener("click", async ()=>{
    try{
      // Cancella cache SW
      if("serviceWorker" in navigator){
        const regs = await navigator.serviceWorker.getRegistrations();
        for(const r of regs){ try{ await r.unregister(); }catch(e){} }
      }
      // Cancella CacheStorage
      if("caches" in window){
        const keys = await caches.keys();
        await Promise.all(keys.map(k=>caches.delete(k)));
      }
      // Hard reload con cache-bust
      const u = new URL(location.href);
      u.searchParams.set("cb", String(Date.now()));
      location.replace(u.toString());
    }catch(e){
      alert("Reset cache: errore. Ricarica manuale.");
      location.reload();
    }
  });
})();
</script>

        <button class="btn" id="btnGuide">Spiegazioni: ON</button>
      </div>
    </header>

    <main>
      <div class="grid">

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/phone.png" alt=""></div>
            <div>
              <h2 data-flow="hub">HUB</h2>
              <p>Home del sistema SerCucTech. Navigazione rapida.</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./index.html" data-guide="hub" aria-label="Apri HUB">Apri</a>
            <span class="kbd">/index.html</span>
          </div>
        </section>

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/user.png" alt=""></div>
            <div>
              <h2>Control Center</h2>
              <p>Admin, remoto, sicurezza, stato server.</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./control.html" data-guide="control" aria-label="Apri Control">Apri</a>
            <span class="kbd">/control.html</span>
          </div>
        </section>

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/image.png" alt=""></div>
            <div>
              <h2>Vetrine</h2>
              <p>Lista vetrine, app e progetti SerCucTech.</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./vetrine.html" data-guide="vetrine" aria-label="Apri Vetrine">Apri</a>
            <span class="kbd">/vetrine.html</span>
          </div>
        </section>

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/ai.png" alt=""></div>
            <div>
              <h2>BIOS PIN</h2>
              <p>Chiave Master anti-hacker. Crea/cambia PIN.</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./bios.html" data-guide="bios" aria-label="Apri BIOS">Apri</a>
            <span class="kbd">/bios.html</span>
          </div>
        </section>

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/pen.png" alt=""></div>
            <div>
              <h2 data-flow="note">Note & Copia</h2>

          <!-- ChatGPT SerCucTech -->
          <div class="card">
            <div class="cardHeader">
              <h2 data-flow="chatgpt">ChatGPT SerCucTech</h2>
            </div>
            <div class="cardBody">
              <p>Assistente intelligente offline</p>
              <a class="link" href="./system/guide/universal.html" data-guide="chatgpt" data-keep-label="1" aria-label="Apri ChatGPT SerCucTech">Apri</a>
            </div>
          </div>

              <p>Area appunti persistente (in arrivo nello step Login).</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./login.html" data-guide="note" aria-label="Apri Note e Copia">Apri</a>
            <span class="kbd">/login.html</span>
          </div>
        </section>

        <section class="card">
          <div class="cardTop">
            <div class="ico"><img src="./icons/bell.png" alt=""></div>
            <div>
              <h2>File / Media</h2>
              <p>Upload, media e gestione file (step successivo).</p>
            </div>
          </div>
          <div class="go">
            <a class="link" href="./media/" data-guide="media" aria-label="Apri File e Media">Apri</a>
            <span class="kbd">/media/</span>
          </div>
        </section>

      </div>
    </main>

    <footer>
      <div>© SerCucTech • Mini-PC Cloud Server</div>
      <div>
        <a class="smallLink" href="https://hub.sercuctech.net" rel="noopener">hub.sercuctech.net</a>
        <span> • </span>
        <span id="ver">SW: …</span>
      </div>
    </footer>

  </div>

<script>
  // PWA install button
  let deferredPrompt = null;
  const btn = document.getElementById("btnInstall");
  const pill = document.getElementById("pwa");
  const ver = document.getElementById("ver");

  window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    btn.style.display = "inline-block";
    pill.textContent = "PWA: installabile";
  });

  btn.addEventListener("click", async () => {
    if (!deferredPrompt) return;
    deferredPrompt.prompt();
    await deferredPrompt.userChoice;
    deferredPrompt = null;
    btn.style.display = "none";
  });

  // Detect standalone
  const standalone = window.matchMedia("(display-mode: standalone)").matches || window.navigator.standalone;
  pill.textContent = standalone ? "PWA: attiva" : "PWA: browser";

  // Register SW
  (async () => {
    try{
      if ("serviceWorker" in navigator){
        const reg = await navigator.serviceWorker.register("sw.js");
        ver.textContent = "SW: " + (reg.active ? "ON" : "install…");
      } else {
        ver.textContent = "SW: n/a";
      }
    } catch(e){
      ver.textContent = "SW: errore";
    }
  })();

  document.getElementById("btnRefresh").onclick = () => location.reload(true);

    // Toggle spiegazioni (guida/voce) globale
    const btnGuide = document.getElementById("btnGuide");
    const syncGuideBtn = () => {
      const off = (localStorage.getItem("SCT_GUIDE_OFF")==="1");
      btnGuide.textContent = off ? "Spiegazioni: OFF" : "Spiegazioni: ON";
    };
    btnGuide.onclick = () => {
      const off = (localStorage.getItem("SCT_GUIDE_OFF")==="1");
      localStorage.setItem("SCT_GUIDE_OFF", off ? "0" : "1");
      syncGuideBtn();
    };
    syncGuideBtn();
</script>

<!-- iOS Quick Link -->
<div style="max-width:980px;margin:12px auto 0 auto;padding:0 16px">
  <a href="./system/ios.html" style="display:block;text-decoration:none;font-weight:1000;
     border:1px solid rgba(202,165,74,.45);border-radius:22px;padding:14px 16px;
     background:rgba(0,0,0,.55);color:#ffd77a">
     Guida iPhone/iPad (Installazione PWA)
  </a>
</div>

<script src="./system/guide/ttsfix.js" defer></script>
<script>
(function(){
let s=0,t=0;
function reset(){s=0;t=0;}
function ok(){if(!t)t=Date.now();if(Date.now()-t>2500)reset();s++;if(s===3){location.href="./system/chatgpt.html";reset();}}
tapSER.onclick=()=>{reset();ok()};
tapMINI.onclick=()=>{if(s===1)ok();else reset()};
tapPC.onclick=()=>{if(s===2)ok();else reset()};
})();
</script>

  <script src="./system/guide/loader.js" defer></script>
  <script src="./system/guide/doubletap.js" defer></script>
</body>
</html>

